# Dockerfile per un'applicazione Python/Flask con Gunicorn
# Utilizziamo l'immagine base Python con Alpine per un'immagine piccola
FROM python:3.10-alpine

# Definisci la directory di lavoro
WORKDIR /usr/src/app

# Copia i requisiti e installa le dipendenze
COPY ./src/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copia il codice sorgente dell'API
COPY ./src/ .

# Espone la porta interna 80
EXPOSE 80

# FIX: Aumenta il timeout a 300s e riduci i worker a 2 per risparmiare memoria (8GB RAM)
CMD ["gunicorn", "-w", "2", "-b", "0.0.0.0:80", "--timeout", "300", "app:app"]


